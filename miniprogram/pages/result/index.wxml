<view class="page">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration">
    <view class="bg-circle bg-circle-1"></view>
    <view class="bg-circle bg-circle-2"></view>
    <view class="bg-gradient"></view>
  </view>

  <!-- å‘½ç›˜å¤´éƒ¨å¡ç‰‡ -->
  <view class="card hero-card">
    <!-- å…«å­—å°ç«  -->
    <view class="bazi-seal">
      <view class="seal-inner">
        <text class="seal-text">{{pillars.day}}</text>
      </view>
      <view class="seal-label">æ—¥ä¸»</view>
    </view>

    <!-- å…³é”®è¯æ ‡ç­¾ -->
    <view class="hero-tags">
      <text class="hero-tag" wx:for="{{summary.keywords}}" wx:key="*this">{{item}}</text>
    </view>

    <!-- ä¸€å¥è¯è§£è¯» -->
    <view class="hero-desc">{{summary.oneLiner}}</view>
  </view>

  <!-- å½“å‰å¤§è¿å¡ç‰‡ -->
  <view class="card stage-card">
    <view class="section-header">
      <text class="section-icon">ğŸŒŠ</text>
      <text class="section-title">è¿ç¨‹é˜¶æ®µ</text>
    </view>

    <view class="dayun-row">
      <view class="dayun-item current">
        <view class="dayun-label">å½“å‰</view>
        <view class="dayun-ganzhi">{{currentDayun.ganzhi}}</view>
        <view class="dayun-range">{{currentDayun.range}}</view>
      </view>
      <view class="dayun-item" wx:if="{{nextDayun}}">
        <view class="dayun-label">ä¸‹ä¸€æ­¥</view>
        <view class="dayun-ganzhi">{{nextDayun.ganzhi}}</view>
        <view class="dayun-range">{{nextDayun.range}}</view>
      </view>
    </view>
  </view>

  <!-- CTA æŒ‰é’® -->
  <button class="cta-primary" bindtap="onStartChat">
    <view class="cta-content">
      <text class="cta-text">æ·±åº¦è§£è¯»å‘½ç›˜</text>
      <text class="cta-icon">â†’</text>
    </view>
  </button>
  <view class="cta-hint">å¯è¯¢é—®ï¼šäº‹ä¸š Â· è´¢è¿ Â· æ„Ÿæƒ… Â· å¥åº·</view>

  <!-- åˆ†äº«æŒ‰é’® -->
  <button class="share-btn" open-type="share">
    <text class="share-icon">âœ¥</text>
    <text>åˆ†äº«å‘½ç›˜</text>
  </button>

  <!-- ä¸“ä¸šè¯¦æƒ…æŠ˜å åŒº -->
  <view class="detail-section">
    <view class="detail-toggle" bindtap="toggleSummary">
      <view class="detail-left">
        <text class="detail-title">ä¸“ä¸šå‘½ç›˜ç»“æ„</text>
        <view class="detail-pillars">
          <view class="pillar-mini">
            <text class="pillar-label">å¹´</text>
            <text class="pillar-value">{{pillars.year}}</text>
          </view>
          <view class="pillar-mini">
            <text class="pillar-label">æœˆ</text>
            <text class="pillar-value">{{pillars.month}}</text>
          </view>
          <view class="pillar-mini">
            <text class="pillar-label">æ—¥</text>
            <text class="pillar-value">{{pillars.day}}</text>
          </view>
          <view class="pillar-mini">
            <text class="pillar-label">æ—¶</text>
            <text class="pillar-value">{{pillars.hour}}</text>
          </view>
        </view>
      </view>
      <view class="detail-arrow {{summaryOpen ? 'open' : ''}}">â–¼</view>
    </view>

    <view class="detail-card {{summaryOpen ? 'open' : ''}}">
      <!-- å››æŸ±è¡¨æ ¼ -->
      <view class="pillar-table">
        <view class="table-head">
          <view class="th first">å››æŸ±</view>
          <view class="th">å¹´æŸ±</view>
          <view class="th">æœˆæŸ±</view>
          <view class="th">æ—¥æŸ±</view>
          <view class="th">æ—¶æŸ±</view>
        </view>
        <view class="table-row">
          <view class="td first">å¤©å¹²</view>
          <view class="td" wx:for="{{table.tiangan}}" wx:key="index">{{item}}</view>
        </view>
        <view class="table-row">
          <view class="td first">åœ°æ”¯</view>
          <view class="td" wx:for="{{table.dizhi}}" wx:key="index">{{item}}</view>
        </view>
      </view>

      <!-- å¤§è¿åˆ—è¡¨ -->
      <view class="dayun-section">
        <view class="dayun-section-title">å®Œæ•´å¤§è¿</view>
        <view class="dayun-grid">
          <view class="dayun-grid-item" wx:for="{{dayun}}" wx:key="index">
            <text class="grid-ganzhi">{{item.ganzhi}}</text>
            <text class="grid-range">{{item.range}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

</view>
