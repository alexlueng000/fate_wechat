/* pages/chat/chat.wxss */

/* ==================== CSS 变量 ==================== */
page {
  --primary: #c93b3a;
  --primary-light: #e45c5c;
  --primary-dark: #a82820;
  --bg: #f7f3ed;
  --bg-warm: #fbf7f2;
  --card-bg: #fffbf7;
  --text-dark: #1a1816;
  --text-medium: #3a332d;
  --text-light: #8e8174;
  --text-hint: #b8a89a;
  --border-light: rgba(142,129,116,0.15);
}

/* ==================== 页面基础 ==================== */
.page {
  min-height: 100vh;
  background: linear-gradient(180deg, #f7f3ed 0%, #f5ede1 100%);
  padding: 16rpx;
  box-sizing: border-box;
}

/* ==================== 引导卡片 ==================== */
.guide-card {
  background: linear-gradient(135deg, #fff 0%, #fffbf7 100%);
  border-radius: 24rpx;
  box-shadow:
    0 6rpx 24rpx rgba(201, 59, 58, 0.1),
    0 0 0 1rpx rgba(200, 170, 150, 0.1);
  padding: 32rpx 24rpx;
  margin-bottom: 16rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.guide-icon {
  font-size: 48rpx;
  margin-bottom: 12rpx;
}

.guide-title {
  font-size: 28rpx;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 8rpx;
}

.guide-desc {
  font-size: 24rpx;
  color: var(--text-light);
  margin-bottom: 20rpx;
  line-height: 1.5;
}

.guide-actions {
  display: flex;
  gap: 12rpx;
  width: 100%;
}

.guide-btn {
  flex: 1;
  padding: 20rpx 0;
  border-radius: 16rpx;
  text-align: center;
  font-size: 26rpx;
  font-weight: 600;
  transition: transform 0.2s ease;
}

.guide-btn.primary {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: #fff;
  box-shadow:
    0 4rpx 12rpx rgba(201, 59, 58, 0.25),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.15);
}

.guide-btn.primary:active {
  transform: scale(0.96);
}

.guide-btn.secondary {
  background: #fff;
  color: var(--primary);
  border: 1rpx solid rgba(200, 170, 150, 0.3);
}

.guide-btn.secondary:active {
  transform: scale(0.96);
  background: #fff9f2;
}

/* ==================== 聊天区容器 ==================== */
.chat {
  height: calc(100vh - 380rpx);
  background: linear-gradient(180deg, #fffbf7 0%, #fff9f4 100%);
  border-radius: 24rpx;
  box-shadow:
    0 4rpx 20rpx rgba(184, 50, 39, 0.06),
    0 0 0 1rpx rgba(184, 50, 39, 0.03);
  padding: 16rpx 12rpx;
  box-sizing: border-box;
}

/* 滚动区 */
.chat-inner {
  display: flex;
  flex-direction: column;
  gap: 12rpx;
}

/* 单条消息行 */
.msg {
  display: flex;
  margin-bottom: 8rpx;
  animation: msgFadeIn 0.3s ease-out;
}

@keyframes msgFadeIn {
  from {
    opacity: 0;
    transform: translateY(12rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.msg.left {
  justify-content: flex-start;
  padding-left: 4rpx;
}

.msg.right {
  justify-content: flex-end;
  padding-right: 4rpx;
}

/* ==================== 气泡本体 ==================== */
.bubble {
  max-width: 90%;
  padding: 16rpx 20rpx;
  border-radius: 20rpx;
  white-space: pre-wrap;
  line-height: 1.6;
  box-sizing: border-box;
  position: relative;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
}

/* 助手气泡 */
.msg.left .bubble {
  background: linear-gradient(135deg, #fff 0%, #fff9f5 100%);
  color: #2c2c2c;
  border: 1rpx solid rgba(200, 170, 150, 0.15);
  border-left: 4rpx solid var(--primary);
  border-bottom-left-radius: 6rpx;
}

/* 用户气泡 */
.msg.right .bubble {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: #fff;
  border-bottom-right-radius: 6rpx;
  box-shadow:
    0 4rpx 12rpx rgba(201, 59, 58, 0.2),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.15);
}

/* ==================== Markdown 富文本 ==================== */
.bubble .md {
  display: block;
}

/* 标题与段落 */
.bubble .md p,
.bubble .md h1,
.bubble .md h2,
.bubble .md h3,
.bubble .md h4 {
  margin: 6rpx 0;
  padding: 0;
}

.bubble .md p:first-child,
.bubble .md h1:first-child,
.bubble .md h2:first-child,
.bubble .md h3:first-child,
.bubble .md h4:first-child {
  margin-top: 0 !important;
}

.bubble .md p:last-child,
.bubble .md h1:last-child,
.bubble .md h2:last-child,
.bubble .md h3:last-child,
.bubble .md h4:last-child {
  margin-bottom: 0 !important;
}

/* 标题样式 */
.bubble .md h1 {
  font-size: 22rpx;
  font-weight: 700;
  color: #3D2E1D;
  margin: 12rpx 0 8rpx 0;
  padding-bottom: 8rpx;
  border-bottom: 2rpx solid rgba(201, 61, 47, 0.15);
}

.msg.right .bubble .md h1 {
  color: #fff;
  border-bottom: 2rpx solid rgba(255, 255, 255, 0.2);
}

.bubble .md h2 {
  font-size: 22rpx;
  font-weight: 600;
  color: #3D2E1D;
  margin: 10rpx 0 6rpx 0;
}

.msg.right .bubble .md h2 {
  color: #fff;
}

.bubble .md h3 {
  font-size: 22rpx;
  font-weight: 600;
  color: #3D2E1D;
  margin: 8rpx 0 4rpx 0;
}

.msg.right .bubble .md h3 {
  color: rgba(255, 255, 255, 0.9);
}

.bubble .md h4 {
  font-size: 22rpx;
  font-weight: 600;
  color: #5a4a3a;
  margin: 6rpx 0 4rpx 0;
}

.msg.right .bubble .md h4 {
  color: rgba(255, 255, 255, 0.85);
}

/* 段落正文 */
.bubble .md p {
  font-size: 24rpx;
  color: #3a3a3a;
  line-height: 1.6;
}

.msg.right .bubble .md p {
  color: rgba(255, 255, 255, 0.95);
}

/* 列表样式 */
.bubble .md ul {
  padding-left: 0;
  margin: 10rpx 0;
  list-style: none;
}

.bubble .md li {
  margin: 6rpx 0;
  line-height: 1.6;
  color: #3a3a3a;
  padding-left: 16rpx;
  text-indent: -8rpx;
  position: relative;
  font-size: 24rpx;
}

.bubble .md li::before {
  content: '';
  position: absolute;
  left: 0rpx;
  top: 8rpx;
  width: 6rpx;
  height: 6rpx;
  border-radius: 50%;
  background: var(--primary);
}

.msg.right .bubble .md li {
  color: rgba(255, 255, 255, 0.95);
}

.msg.right .bubble .md li::before {
  background: rgba(255, 255, 255, 0.5);
}

/* 粗体 */
.bubble .md strong {
  font-weight: 600;
}

.msg.right .bubble .md strong {
  color: #fff;
  font-weight: 700;
}

/* 【xxx】强调样式 */
.bubble .md .highlight {
  color: var(--primary);
  font-weight: 600;
}

.msg.right .bubble .md .highlight {
  color: #ffdbd8;
}

/* 〖xxx〗橙色强调(次要) */
.bubble .md .highlight-warning {
  color: #e67e22;
  font-weight: 600;
}

.msg.right .bubble .md .highlight-warning {
  color: #ffd8b8;
}

/* 《xxx》蓝色强调(信息) */
.bubble .md .highlight-info {
  color: #3498db;
  font-weight: 600;
}

.msg.right .bubble .md .highlight-info {
  color: #d8e8f8;
}

/* ==================== 快捷分析卡 ==================== */
.card {
  background: linear-gradient(135deg, #fff 0%, #fffbf7 100%);
  border-radius: 24rpx;
  box-shadow:
    0 6rpx 20rpx rgba(26, 24, 22, 0.04),
    0 0 0 1rpx rgba(200, 170, 150, 0.08);
  padding: 20rpx 20rpx;
  margin-top: 14rpx;
}

.quick-card {
  border: none;
  padding: 18rpx 20rpx;
}

.quick-title {
  font-size: 24rpx;
  font-weight: 600;
  color: var(--text-medium);
  margin-bottom: 12rpx;
  padding-left: 4rpx;
}

.quick-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10rpx;
}

.quick-chip {
  background: linear-gradient(135deg, #fff 0%, #fff9f2 100%);
  border: 1rpx solid rgba(200, 170, 150, 0.2);
  color: var(--primary);
  border-radius: 20rpx;
  padding: 14rpx 0;
  text-align: center;
  font-size: 24rpx;
  font-weight: 500;
  box-shadow: 0 2rpx 6rpx rgba(168, 50, 32, 0.06);
  transition: all 0.2s ease;
}

.quick-chip:active {
  transform: scale(0.95);
  background: linear-gradient(135deg, #fff9f2 0%, #fff4e8 100%);
}

/* ==================== 操作按钮栏 ==================== */
.action-bar {
  display: flex;
  gap: 10rpx;
  margin-top: 14rpx;
}

.action-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4rpx;
  padding: 14rpx 8rpx;
  background: linear-gradient(135deg, #fff 0%, #fffbf7 100%);
  border-radius: 18rpx;
  box-shadow:
    0 3rpx 12rpx rgba(26, 24, 22, 0.04),
    0 0 0 1rpx rgba(200, 170, 150, 0.08);
  font-size: 20rpx;
  color: var(--text-medium);
  font-weight: 500;
  transition: all 0.2s ease;
}

.action-icon {
  font-size: 24rpx;
}

.action-btn:active {
  transform: scale(0.96);
  box-shadow:
    0 1rpx 6rpx rgba(26, 24, 22, 0.04),
    0 0 0 1rpx rgba(200, 170, 150, 0.08);
}

/* ==================== 输入区 ==================== */
.inputBar {
  margin-top: 14rpx;
  display: flex;
  gap: 10rpx;
  align-items: center;
}

.ipt {
  flex: 1;
  background: #fff;
  border-radius: 999rpx;
  padding: 18rpx 22rpx;
  font-size: 26rpx;
  border: 1rpx solid var(--border-light);
  box-shadow:
    0 2rpx 6rpx rgba(0, 0, 0, 0.03),
    inset 0 1rpx 2rpx rgba(0, 0, 0, 0.01);
  color: #3a3a3a;
}

.ipt:focus {
  border-color: rgba(184, 50, 39, 0.2);
}

.sendBtn {
  flex: 0 0 auto;
  padding: 0 36rpx;
  height: 72rpx;
  line-height: 72rpx;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: #fff;
  border-radius: 999rpx;
  font-weight: 700;
  font-size: 26rpx;
  box-shadow:
    0 6rpx 16rpx rgba(201, 59, 58, 0.25),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.15);
  border: none;
  transition: all 0.2s ease;
}

.sendBtn:active {
  transform: scale(0.95);
  box-shadow:
    0 3rpx 10rpx rgba(201, 59, 58, 0.25),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.15);
}

.sendBtn[disabled] {
  opacity: 0.5;
}

/* ==================== 免责声明 ==================== */
.tip {
  margin-top: 12rpx;
  text-align: center;
  font-size: 20rpx;
  color: var(--text-light);
}

/* ==================== Typing Indicator ==================== */
.typing-bubble {
  padding: 16rpx 20rpx;
  min-width: 70rpx;
}

.typing-dots {
  display: flex;
  gap: 8rpx;
  align-items: center;
  padding: 4rpx 0;
}

.typing-dots .dot {
  width: 12rpx;
  height: 12rpx;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 50%;
  animation: typingBounce 1.2s ease-in-out infinite;
}

.typing-dots .dot:nth-child(1) {
  animation-delay: 0s;
}

.typing-dots .dot:nth-child(2) {
  animation-delay: 0.15s;
}

.typing-dots .dot:nth-child(3) {
  animation-delay: 0.3s;
}

@keyframes typingBounce {
  0%, 60%, 100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-10rpx);
    opacity: 1;
  }
}

/* ==================== 解锁提示 ==================== */
.unlock-prompt {
  margin-top: 10rpx;
  padding: 12rpx 16rpx;
  background: linear-gradient(135deg, rgba(196, 165, 116, 0.12) 0%, rgba(196, 165, 116, 0.06) 100%);
  border-radius: 14rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6rpx;
  border: 1rpx dashed rgba(196, 165, 116, 0.3);
}

.unlock-icon {
  font-size: 22rpx;
}

.unlock-text {
  font-size: 22rpx;
  color: #A67C52;
  font-weight: 500;
}

.unlock-arrow {
  font-size: 20rpx;
  color: #A67C52;
}

/* ==================== Button 样式重置 ==================== */
button::after {
  border: none;
}
