<view class="chat-page">
  <!-- 会话列表 -->
  <scroll-view scroll-y class="list" scroll-with-animation scroll-into-view="{{toView}}">
    <block wx:for="{{messages}}" wx:key="index" wx:for-index="i" wx:for-item="m">
      <view class="msg {{m.role}}">
        <view class="avatar">{{ m.role === 'user' ? '我' : 'AI' }}</view>
        <view class="bubble"><text class="text" selectable="true">{{m.content}}</text></view>
      </view>
    </block>
    <view id="{{toView}}"></view>
  </scroll-view>

  <!-- 快捷方式：4列×2行，固定两排 -->
  <view class="quick-grid">
    <view class="q-item" bindtap="onQuickAsk" data-key="personality">性格特征</view>
    <view class="q-item" bindtap="onQuickAsk" data-key="avatar">人物画像</view>
    <view class="q-item" bindtap="onQuickAsk" data-key="partner_avatar">正缘画像</view>
    <view class="q-item" bindtap="onQuickAsk" data-key="career">事业建议</view>
    <view class="q-item" bindtap="onQuickAsk" data-key="wealth">财运</view>
    <view class="q-item" bindtap="onQuickAsk" data-key="health">健康</view>
    <view class="q-item wide" bindtap="onQuickAsk" data-key="love_timing">正缘应期</view>
    <view class="q-item ghost" bindtap="onClear">清空对话</view>
  </view>

  <!-- 固定底部：免责声明 + 输入条（一个整体，不会互相遮挡） -->
  <view class="footer">
    <!-- <view class="tip">* 对话仅供参考，不构成专业建议 *</view> -->
    <view class="inputBar">
      <input class="ipt"
             placeholder="来说点什么…"
             value="{{input}}"
             bindinput="onInput"
             confirm-type="send"
             bindconfirm="onSend"
             cursor-spacing="14"/>
      <button class="sendBtn"
              bindtap="onSend"
              loading="{{loading}}"
              disabled="{{loading}}">发送</button>
    </view>
  </view>

  <!-- 占位：给 iOS 安全区兜底（即使 footer 高度变化也不抖） -->
  <view class="spacer"></view>
</view>
