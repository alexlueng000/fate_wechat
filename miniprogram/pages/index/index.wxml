<view class="page">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <view class="bg-circle bg-circle-1"></view>
    <view class="bg-circle bg-circle-2"></view>
    <view class="bg-circle bg-circle-3"></view>
    <view class="bg-gradient"></view>
  </view>

  <view class="top-spacer"></view>

  <view class="card">
    <!-- Logo区域 -->
    <view class="logo-seal">
      <!-- <image class="logo-image" src="/images/yifan_logo.png" mode="aspectFit" /> -->
      <view class="logo-title">易凡文化</view>
      <view class="logo-subtitle">探索 · 发现 · 成长</view>
    </view>

    <!-- 分隔线 -->
    <view class="divider"></view>

    <!-- 性别选择 -->
    <view class="field-group">
      <view class="field-header">
        <text class="field-icon">♂</text>
        <text class="field-label">您的性别</text>
      </view>
      <view class="toggle-group">
        <view class="toggle-item {{gender==='男'?'active':''}}" bindtap="setMale">
          <text class="toggle-text">男</text>
        </view>
        <view class="toggle-item {{gender==='女'?'active':''}}" bindtap="setFemale">
          <text class="toggle-text">女</text>
        </view>
      </view>
    </view>

    <!-- 历法选择 -->
    <view class="field-group">
      <view class="field-header">
        <text class="field-icon">📅</text>
        <text class="field-label">历法类型</text>
      </view>
      <view class="toggle-group">
        <view class="toggle-item {{calendar==='公历'?'active':''}}" bindtap="setSolar">
          <text class="toggle-text">公历</text>
        </view>
        <view class="toggle-item {{calendar==='农历'?'active':''}}" bindtap="setLunar">
          <text class="toggle-text">农历</text>
        </view>
      </view>
    </view>

    <!-- 出生日期 -->
    <view class="field-group">
      <view class="field-header">
        <text class="field-icon">🎂</text>
        <text class="field-label">出生日期</text>
      </view>
      <picker mode="date" value="{{birth_date}}" start="1900-01-01" end="2099-12-31" bindchange="onPickDate">
        <view class="picker-box">
          <text class="picker-value">{{birth_date}}</text>
          <text class="picker-arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 出生时间 -->
    <view class="field-group">
      <view class="field-header">
        <text class="field-icon">⏰</text>
        <text class="field-label">出生时间</text>
      </view>
      <picker mode="time" value="{{birth_time}}" bindchange="onPickTime">
        <view class="picker-box">
          <text class="picker-value">{{birth_time}}</text>
          <text class="picker-arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 出生地点 -->
    <view class="field-group field-group-last">
      <view class="field-header">
        <text class="field-icon">📍</text>
        <text class="field-label">出生地点</text>
      </view>
      <view class="input-box">
        <input
          class="text-input"
          placeholder="请输入出生城市"
          placeholder-style="color: #b8a89a;"
          value="{{birthplace}}"
          bindinput="onInputPlace"
        />
      </view>
    </view>

    <!-- 隐私说明 -->
    <view class="privacy-note">
      <text class="note-icon">🔒</text>
      <text class="note-text">您的信息仅用于本次分析，不会保存或对外展示</text>
    </view>

    <!-- CTA 按钮 -->
    <button
      class="cta-btn {{submitting?'loading':''}}"
      loading="{{submitting}}"
      disabled="{{submitting}}"
      bindtap="onStart"
    >
      <view class="cta-content">
        <text class="cta-text">{{submitting?'生成中...':'查看我的分析'}}</text>
        <text class="cta-icon" wx:if="{{!submitting}}">✦</text>
      </view>
    </button>

  </view>

  <!-- 免责声明弹窗 -->
  <disclaimer-modal id="disclaimerModal" bind:agree="onDisclaimerAgree" />
</view>
